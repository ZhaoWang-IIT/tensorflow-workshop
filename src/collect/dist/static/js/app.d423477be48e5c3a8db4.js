webpackJsonp([1],{"7zck":function(t,r){},NHnr:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("7+uW");function n(t){return location.protocol+"//"+location.hostname+":"+location.port+t}var o={name:"camera",props:{id:{type:String,required:!0}},data:function(){return{loaded:!1,error:null,ver:1,saving:!1}},computed:{imageUrl:function(){return n("/cameras/"+this.id+"/img.jpg?"+this.ver)}},mounted:function(){var t=this.$refs.img;t.onload=this.onLoad,t.onerror=this.onError,t.onabort=this.onAbort},methods:{refresh:function(){this.loaded=!1,this.error=null,this.ver+=1},save:function(){var t=this,r=n("/cameras/"+this.id+"/save");this.saving=!0,fetch(r,{method:"post"}).then(function(){t.refresh()})},onLoad:function(t){this.loaded=!0,this.saving=!1,this.error=null},onError:function(t){console.log("ERROR",t),this.error=t},onAbort:function(t){console.log("ABORT",t),this.error=t}}},i={render:function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("v-card",{attrs:{flat:""}},[e("v-card-title",[e("h2",[t._v(t._s(t.id))])]),t._v(" "),e("img",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],ref:"img",attrs:{src:t.imageUrl}}),t._v(" "),t.loaded?t._e():e("div",{staticClass:"waiting"},[e("v-progress-linear",{attrs:{indeterminate:!0,height:"5"}}),t._v(" "),e("div",[t._v("Waiting for image")])],1),t._v(" "),t.error?e("div",{staticClass:"error"},[e("div",[t._v("An error occurred loading the image")])]):t._e(),t._v(" "),e("v-card-actions",[t.loaded?e("v-btn",{attrs:{disabled:t.saving,color:"orange darken-2",dark:""},on:{click:t.save}},[t._v("Save")]):t._e(),t._v(" "),t.loaded||t.error?e("v-btn",{attrs:{flat:""},on:{click:t.refresh}},[t._v("Refresh")]):t._e()],1)],1)},staticRenderFns:[]};var s={name:"App",components:{Camera:e("VU/8")(o,i,!1,function(t){e("QJZl")},"data-v-6d283aa7",null).exports},data:function(){return{cameras:[]}},created:function(){this.initCameras()},methods:{initCameras:function(){var t,r=this;t=function(t){r.cameras=t},fetch(n("/cameras")).then(function(t){return t.json()}).then(function(r){t(r)})},refreshAll:function(){this.$refs.cameras.forEach(function(t){return t.refresh()})}}},c={render:function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("v-app",[e("v-content",[e("v-card",{staticClass:"elevation-3",attrs:{height:"100%"}},[e("v-toolbar",{attrs:{dark:"",color:"primary"}},[e("v-toolbar-title",[t._v("Collect Images")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{flat:""},on:{click:t.refreshAll}},[t._v("Refresh all")])],1),t._v(" "),e("v-card-text",{staticClass:"content-body"},[e("v-container",{attrs:{fluid:""}},[e("v-layout",{attrs:{row:"",wrap:""}},t._l(t.cameras,function(t){return e("v-flex",{key:t,attrs:{"offset-sm1":"",sm10:"","offset-md0":"",md6:"",lg4:""}},[e("camera",{ref:"cameras",refInFor:!0,attrs:{id:t}})],1)}))],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=e("VU/8")(s,c,!1,function(t){e("wEVX")},"data-v-18fa0480",null).exports,d=e("3EgV"),v=e.n(d);e("7zck");a.a.use(v.a),a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:l},template:"<App/>"})},QJZl:function(t,r){},wEVX:function(t,r){}},["NHnr"]);
//# sourceMappingURL=app.d423477be48e5c3a8db4.js.map